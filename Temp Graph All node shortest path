#include<stdio.h>
#include<stdlib.h>

typedef struct Graph{
    
    struct graphnode * head;
    int count;
    
}Graph;

typedef struct graphnode{
    
    int data;
    struct graphnode * vertexpointer;
    struct graphnode * edgepointer;
    
}graphnode;

Graph * creategraph(){
    
    Graph * graph;
    graph = (Graph*)malloc(sizeof(Graph));
    graph->head = NULL;
    graph->count = 0;
    return graph;
    
}

graphnode * findposition(graphnode * vertex, int number){
    
    while(vertex->data != number){
        
        vertex = vertex->vertexpointer;
    }
    return vertex;
}

graphnode * insert(Graph * graph, graphnode * vertex){
    
    graphnode * vertex1;
    vertex1 = graph->head;
    if(graph->head == NULL){
        
        graph->head = vertex;
        return vertex;
    }
    
    while(vertex1->vertexpointer != NULL){
        
        vertex1 = vertex1->vertexpointer;
    }
    vertex1->vertexpointer = vertex;
    return vertex;
}

graphnode * createvertex(int number){
    
    graphnode * vertex;
    vertex = (graphnode*)malloc(sizeof(graphnode));
    vertex->data = number;
    vertex->vertexpointer = NULL;
    vertex->edgepointer = NULL;
    return vertex;

}

void createedge(graphnode * vertex, int number1, int number2){
    
    graphnode * vertex1, * vertex2, * vertex3;
    vertex1 = findposition(vertex, number1);
    vertex2 = findposition(vertex, number2);
    vertex3 = createvertex(number2);

    while(vertex1->edgepointer != NULL){
        
        vertex1 = vertex1->edgepointer;
    }
    vertex1->edgepointer = vertex3;
    vertex3->vertexpointer = vertex2;
     
}

void SmallestPath(graphnode * source, graphnode * destination, int distance){
    
    while(source != NULL){
        
        push(s, source);
        destination = source->edgepointer;
        
        while(destination !=  NULL){
            
            if(destination->vertexpointer->repeat == 1){
                
                destination = destination->edgepointer;
            }
            
            push(s, destination);
            distance = distance + destination->data; 
            createtree(source, destination, distance);
            temp = destination->vertexpointer;
            
            while(temp != NULL){
                
                temp = temp->edgepointer;
                push(s, temp);
                distance = distance + temp->data;
                createtree(source, destination, distance);
                temp = temp->vertexpointer;
            }
            
            pop(s);
            destination = stacktop(s);
            destination = destination->edgepointer;
            
        }   
}

int main(){
    
    Graph * graph;
    graphnode * vertex;
    graph = creategraph();
    vertex = createvertex(1);
    insert(graph, vertex);
    vertex = createvertex(2);
    insert(graph, vertex);
    vertex = createvertex(3);
    insert(graph, vertex);
    vertex = createvertex(4);
    insert(graph, vertex);
    vertex = createvertex(5);
    insert(graph, vertex);
    vertex = createvertex(6);
    insert(graph, vertex);
    VertexSearch(graph->head);
    createedge(graph->head, 1, 2);
    createedge(graph->head, 2, 3);
    createedge(graph->head, 3, 4);
    createedge(graph->head, 4, 5);
    createedge(graph->head, 3, 5);
    createedge(graph->head, 2, 5);
    createedge(graph->head, 5, 6);
    EdgeSearch(graph->head);
    SmallestPath(graph->head, NULL, 0);
    return 0;
   
}
